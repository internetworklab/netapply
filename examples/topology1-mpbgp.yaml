nodes:
  testnode:
    frr_containers:
      - container_name: lax1
        image: quay.io/frrouting/frr:10.4.0
        hostname: lax1
      - container_name: lax2
        image: quay.io/frrouting/frr:10.4.0
        hostname: lax2
      - container_name: ix
        image: quay.io/frrouting/frr:10.4.0
        hostname: ix
    containers:
      - lax1
      - lax2
      - ix
    stateful_dir: /root/projects/netapply/nodes/testnode/.go-reconciler-state
    dataplane:
      veth:
        - name: v-lax1-a
          container_name: lax1
          addresses:
            - cidr: "2001:db8:0:1::/64"
            - local: "2001:db8:0:1::1"
              peer: "2001:db8:1:1::1/64"
          peer:
            name: v-lax1-b
            container_name: ix
        - name: v-lax2-a
          container_name: lax2
          addresses:
            - cidr: "2001:db8:1:1::/64"
            - local: "2001:db8:1:1::1"
              peer: "2001:db8:0:1::1/64"
          peer:
            name: v-lax2-b
            container_name: ix
      bridge:
        - name: br0
          container_name: ix
          slave_interfaces:
            - v-lax1-b
            - v-lax2-b
    controlplane:
      - container_name: lax1
        log_level: debugging
        debug_bgp_updates: true
        debug_zebra_events: true
        debug_zebra_dplane: true
        debug_zebra_kernel: true
        route_maps:
          - name: allow-all
            policy: permit
            order: 10
        bgp:
          - vrf: default
            log_neighbor_changes: true
            no_ipv4_unicast: true
            no_ipv6_auto_ra: true
            disable_ebgp_connected_route_check: true
            asn: 65001
            router_id: "0.0.0.1"
            address_families:
              - afi: ipv6
                safi: unicast
                networks:
                  - "2001:db8:0:1::/64"
                activate:
                  - "group1"
                route_maps:
                  - peer: "group1"
                    name: allow-all
                    direction: in
                  - peer: "group1"
                    name: allow-all
                    direction: out
            peer_groups:
              group1:
                capabilities:
                  - extended-nexthop
                peers:
                  - "2001:db8:1:1::1"
                asn: 65002
                update_source: "2001:db8:0:1::1"
      - container_name: lax2
        log_level: debugging
        debug_bgp_updates: true
        debug_zebra_events: true
        debug_zebra_dplane: true
        debug_zebra_kernel: true
        route_maps:
          - name: allow-all
            policy: permit
            order: 10
        bgp:
          - vrf: default
            log_neighbor_changes: true
            no_ipv4_unicast: true
            no_ipv6_auto_ra: true
            disable_ebgp_connected_route_check: true
            asn: 65002
            router_id: "0.0.0.2"
            address_families:
              - afi: ipv6
                safi: unicast
                route_maps:
                  - peer: "group1"
                    name: allow-all
                    direction: in
                  - peer: "group1"
                    name: allow-all
                    direction: out
                networks:
                  - "2001:db8:1:1::/64"
                activate:
                  - "group1"
            peer_groups:
              group1:
                capabilities:
                  - extended-nexthop
                peers:
                  - "2001:db8:0:1::1"
                asn: 65002
                update_source: "2001:db8:1:1::1"
