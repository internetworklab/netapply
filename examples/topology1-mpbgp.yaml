nodes:
  testnode:
    frr_containers:
      - container_name: lax1
        image: quay.io/frrouting/frr:10.3.0
        hostname: lax1
      - container_name: lax2
        image: quay.io/frrouting/frr:10.3.0
        hostname: lax2
      - container_name: ix
        image: quay.io/frrouting/frr:10.3.0
        hostname: ix
    containers:
      - lax1
      - lax2
      - ix
    stateful_dir: /root/projects/netapply/nodes/testnode/.go-reconciler-state
    dataplane:
      dummy:
        - name: dummy0
          container_name: lax1
          addresses:
            - cidr: "fdda:8ca4:1556:a::1/64"
        - name: dummy0
          container_name: lax2
          addresses:
            - cidr: "fdda:8ca4:1556:b::1/64"
      veth:
        - name: v-lax1-a
          container_name: lax1
          addresses:
            - local: "fe80::a"
              peer: "fe80::b/128"
          peer:
            name: v-lax1-b
            container_name: ix
        - name: v-lax2-a
          container_name: lax2
          addresses:
            - local: "fe80::b"
              peer: "fe80::a/128"
          peer:
            name: v-lax2-b
            container_name: ix
      bridge:
        - name: br0
          container_name: ix
          slave_interfaces:
            - v-lax1-b
            - v-lax2-b
    controlplane:
      - container_name: lax1
        log_level: debugging
        debug_bgp_updates: true
        debug_zebra_events: true
        debug_zebra_dplane: true
        debug_zebra_kernel: true
        route_maps:
          - name: allow-all
            policy: permit
            order: 10
        bgp:
          - vrf: default
            log_neighbor_changes: true
            no_ipv4_unicast: true
            no_ipv6_auto_ra: true
            asn: 65001
            router_id: "0.0.0.1"
            address_families:
              - afi: ipv6
                safi: unicast
                networks:
                  - "fdda:8ca4:1556:a::/64"
                activate:
                  - "fe80::b"
                route_maps:
                  - peer: "fe80::b"
                    name: allow-all
                    direction: in
                  - peer: "fe80::b"
                    name: allow-all
                    direction: out
            linklocal_peers:
              - peer_linklocal_address: "fe80::b"
                interface_name: "v-lax1-a"
                peer_asn: 65002
                capabilities:
                  - extended-nexthop
                update_source: "fe80::a"
      - container_name: lax2
        log_level: debugging
        debug_bgp_updates: true
        debug_zebra_events: true
        debug_zebra_dplane: true
        debug_zebra_kernel: true
        route_maps:
          - name: allow-all
            policy: permit
            order: 10
        bgp:
          - vrf: default
            log_neighbor_changes: true
            no_ipv4_unicast: true
            no_ipv6_auto_ra: true
            asn: 65002
            router_id: "0.0.0.2"
            address_families:
              - afi: ipv6
                safi: unicast
                route_maps:
                  - peer: "fe80::a"
                    name: allow-all
                    direction: in
                  - peer: "fe80::a"
                    name: allow-all
                    direction: out
                networks:
                  - "fdda:8ca4:1556:b::/64"
                activate:
                  - "fe80::a"
            linklocal_peers:
              - peer_linklocal_address: "fe80::a"
                interface_name: "v-lax2-a"
                peer_asn: 65001
                capabilities:
                  - extended-nexthop
                update_source: "fe80::b"
